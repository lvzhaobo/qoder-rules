# 企业级 AI Coding 原则与约定 (v2.0)

> 覆盖开发、管理、架构与安全的全链路人机协作协议

---

## ⚠️ 核心修订说明

针对真实企业场景,补充了**"安全合规"**(数据防泄露)与**"架构管控"**(防代码腐化)视角,并强化了开发者的**"责任归属"**原则。

---

## 🛡️ 安全与合规视角:红线与底线

> 企业级应用的最前置条件,防止数据泄露与知识产权风险。

| 序号 | 原则名称 | 核心内涵 | 行动指南 (Do's & Don'ts) |
|:---:|---------|---------|------------------------|
| 1 | **数据脱敏** | 零信任数据投喂 | ❌ 禁止将 AK/SK、数据库密码、客户 PII(个人敏感信息)直接贴入对话框。<br>✅ 必须先用占位符(如 `******`)替换敏感信息后再发送。 |
| 2 | **合规引用** | 开源协议审计 | ❌ 不要直接复制 AI 生成的大段复杂算法而不检查出处。<br>✅ 警惕 AI 照搬 GPL 等传染性协议代码,必要时使用代码扫描工具复核。 |
| 3 | **隔离原则** | 内网穿透防护 | ❌ 禁止将公司核心商业逻辑(Core Domain)全量上传到公有云 AI。<br>✅ 仅上传通用的技术逻辑或经过抽象后的伪代码。 |

---

## 💻 开发者视角:高效沟通与责任归属

> 从"使用者"转变为"指挥官"和"审核员"。

| 序号 | 原则名称 | 核心内涵 | 行动指南 (Do's & Don'ts) |
|:---:|---------|---------|------------------------|
| 1 | **责任归属** | 你才是代码的主人 | ❌ "这是 AI 写的,bug 不怪我"。<br>✅ **AI Coding 只是副驾驶**。提交的代码必须由你完全理解并负责,任何 AI 引入的 Bug 都是你的 Bug。 |
| 2 | **粒度控制** | 拆解任务,分批生成 | ❌ 避免一次性让 AI 生成整个模块或超长文件。<br>✅ 将大需求拆解为接口定义、核心逻辑、单元测试三步走,保持对代码的掌控力。 |
| 3 | **批判性思维** | 保持适度怀疑 | ❌ 不要盲目信任首次生成的代码。<br>✅ 需人工 Review,特别是涉及**最新日期**、特定库版本或边界条件的代码,AI 可能会产生幻觉。 |
| 4 | **过程导向** | 信逻辑胜于信结果 | ❌ 结果可能具有随机性。<br>✅ 让 AI 输出**处理逻辑和推导过程**,确保你理解其思路,这样生成的代码才更健壮。 |
| 5 | **需求对齐** | 提供充足上下文 | ❌ 避免"帮我写个登录"这种模糊指令。<br>✅ 提供数据结构定义、依赖库版本、错误处理要求,像给新同事讲业务一样给 AI 讲背景。 |
| 6 | **可维护性** | 拒绝"一次性"代码 | ❌ AI 生成的代码虽然能跑,但可能变量命名混乱、缺乏注释。<br>✅ 要求 AI 生成符合团队规范的代码,或者在生成后手动重构。 |
| 7 | **测试驱动** | 生成代码必生成测试 | ✅ 利用 AI 擅长写样板代码的特点,强制要求生成对应的单元测试。<br>💡 通过测试用例来反向验证 AI 生成的业务逻辑是否正确。 |

---

## 🏗️ 架构与技术负责人视角:标准与防腐

> 防止 AI 生成代码导致的技术债务爆炸。

| 序号 | 原则名称 | 核心内涵 | 行动指南 (Do's & Don'ts) |
|:---:|---------|---------|------------------------|
| 1 | **规范对齐** | Prompt 即规范 | ✅ 将团队的代码规范(Lint 规则、命名约定、分层架构)整理到 System Prompt 或`.cursorrules`文件中。<br>💡 让 AI 默认就生成符合团队风格的代码。 |
| 2 | **总量控制** | 警惕代码膨胀 | ❌ AI 容易生成冗余代码或过度设计。<br>✅ 定期审查代码总量趋势,提倡"删除代码"也是贡献,保持核心逻辑的精简。 |
| 3 | **技术选型** | 收敛依赖库 | ❌ AI 倾向于引入它熟悉的库,可能导致项目中存在多个功能的 JSON 库。<br>✅ 严格审查 `package.json` / `pom.xml` 变更,禁止 AI 随意引入新依赖。 |

---

## 📊 管理者视角:推进策略与效能管理

> 关注长期效能与团队能力建设。

| 序号 | 原则名称 | 管理策略 | 落地动作 |
|:---:|---------|---------|---------|
| 1 | **知识资产化** | Prompt 也是资产 | ✅ 鼓励沉淀优秀的 Prompt 库,而不是让每个人从零摸索。<br>💡 建立内部的"Prompt 市场"或共享文档,复用高价值的提问模板。 |
| 2 | **试点先行** | 寻找破局点 | ✅ **优先选择**:工具组、前端中台、单元测试补全等容错率高的场景。<br>❌ **避免**:直接在核心交易链路或极度保守的团队全面铺开。 |
| 3 | **数据驱动** | 效能多维评估 | ❌ 不要只看代码生成量(Line of Code),这会导致注水。<br>✅ 关注**研发周期缩短率**、**Bug 逃逸率**变化以及开发者的满意度。 |
| 4 | **预期管理** | 包容"阵痛期" | 💡 认知对齐:引入 AI 初期,因学习成本和流程调整,效率可能短暂下滑(J型曲线)。<br>✅ 给予缓冲期,不因短期波动叫停,鼓励长期主义。 |

---

## 版本信息

- **文档版本**: v2.0
- **适用场景**: 企业级 AI 辅助编程全流程
- **维护团队**: AI Coding Team
