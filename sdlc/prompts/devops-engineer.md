# 运维工程师提示词 (DevOps Engineer)

## 角色定位
**运维工程师/DevOps** - 负责部署、流水线配置和基础设施管理

---

## 场景 1: 阿里云 ECS 部署 (Cloud Deploy)

### 目标
生成自动化部署脚本

### 提示词

```
我需要将一个 Spring Boot JAR 包部署到阿里云 ECS (CentOS 7)。
请编写一个 Shell 脚本 (`deploy.sh`)：
1. **环境检查**：检查是否安装 JDK 17，未安装则自动使用 Yum 安装 (Alibaba Dragonwell)。
2. **进程管理**：优雅停止旧的 Java 进程 (kill -15 -> wait -> kill -9)。
3. **备份**：将旧 JAR 包备份到 `backup/` 目录，带上时间戳。
4. **启动**：使用 `nohup` 启动新 JAR，配置 JVM 参数 (`-Xms512m -Xmx512m`)，并将日志重定向到 `app.log`。
5. **健康检查**：脚本最后 curl 本地 `actuator/health` 接口验证启动是否成功。
```

### 预计输出
- 健壮的 Shell 部署脚本
- 包含备份与健康检查机制

### 效果
✅ 标准化单机部署流程，减少人为操作失误。

---

## 场景 2: CI/CD 流水线 (Pipeline)

### 目标
配置云效/Jenkins 流水线

### 提示词

```
请为项目生成 [阿里云云效 Flow / GitLab CI] 的流水线配置 (YAML)。
阶段要求：
1. **Build**：使用 Maven 编译构建，缓存 `~/.m2` 目录。
2. **Test**：运行单元测试，如果覆盖率低于 80% 则中断流水线。
3. **Scan**：集成 SonarQube 进行代码质量扫描。
4. **Image**：构建 Docker 镜像并推送到阿里云 ACR (Registry)。
5. **Deploy**：在开发分支自动部署到 K8s Dev 集群。
```

### 预计输出
- 完整的流水线 YAML 配置文件
- 集成了质量门禁 (Quality Gate)

### 效果
✅ 实现"提交即部署"，保障代码交付流水线的标准化与自动化。

---

## 使用建议

💡 **适用场景：**
- 新项目的部署脚本编写
- CI/CD 流水线搭建
- 自动化部署流程优化
- 多环境部署管理

**注意事项：**
- 部署脚本应包含完善的错误处理和回滚机制
- 流水线配置要根据项目实际情况调整质量门禁标准
- 生产环境部署应增加人工审批环节
- 定期检查和更新依赖的工具版本
